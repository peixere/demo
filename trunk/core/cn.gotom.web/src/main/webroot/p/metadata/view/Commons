{
    "type": "class",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "Commons",
        "designer|userAlias": "Commons"
    },
    "configAlternates": {
        "TreeModel": "object"
    },
    "designerId": "640e059b-b167-4e5b-a268-5d16d3e3b81a",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "TreeModel",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getQueryParam",
                "designer|params": [
                    "name"
                ],
                "implHandler": [
                    "var regex = RegExp('[?&]' + name + '=([^&]*)');\r",
                    "var scriptEls = document.getElementsByTagName('script');\r",
                    "var path = scriptEls[scriptEls.length - 1].src;\r",
                    "var match = regex.exec(location.search) || regex.exec(path);\r",
                    "return match && decodeURIComponent(match[1]);"
                ]
            },
            "designerId": "a68c10f0-16df-40af-9550-59786b2af40c"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "addQueryParam",
                "designer|params": [
                    "url",
                    "name",
                    "value"
                ],
                "implHandler": [
                    "var path = url;\r",
                    "if (value !== null && value.length > 0)\r",
                    "{\r",
                    "    if (url.indexOf('?') >= 0)\r",
                    "    {\r",
                    "        path = url + '&' + name + '=' + value;\r",
                    "    }\r",
                    "    else\r",
                    "    {\r",
                    "        path = url + '?' + name + '=' + value;\r",
                    "    }\r",
                    "}\r",
                    "return path;"
                ]
            },
            "designerId": "b03ca34c-0714-4eac-bd74-9f432c5f8439"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTreePanelCheckChange",
                "designer|params": [
                    "node",
                    "checked"
                ],
                "implHandler": [
                    "this.onTreeChildNodesChecked(node,checked);\r",
                    "this.onTreeParentNodeChecked(node,checked);"
                ]
            },
            "designerId": "be116a82-6bf2-4468-9a00-8b9fa63c4593"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTreeChildNodesChecked",
                "designer|params": [
                    "node",
                    "checked"
                ],
                "implHandler": [
                    "var me = this;\r",
                    "Ext.each(node.childNodes,function(childNode)\r",
                    "{\r",
                    "    childNode.set('checked', checked);   \r",
                    "    if(childNode.childNodes.length >0)\r",
                    "    {\r",
                    "        me.onTreeChildNodesChecked(childNode,checked);\r",
                    "    }\r",
                    "});"
                ]
            },
            "designerId": "c1a5da96-1b71-462c-9afe-fdeeb708223a"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTreeParentNodeChecked",
                "designer|params": [
                    "node",
                    "checked"
                ],
                "implHandler": [
                    "if(node.parentNode !== null)\r",
                    "{\r",
                    "    if(node.parentNode.childNodes.length >0)\r",
                    "    {\r",
                    "        var parentCheck = false;\r",
                    "        Ext.each(node.parentNode.childNodes,function(childNode)\r",
                    "        {\r",
                    "            if(childNode.data.checked)\r",
                    "            {\r",
                    "                parentCheck = true;\r",
                    "            }\r",
                    "        });\r",
                    "        node.parentNode.set('checked', parentCheck);\r",
                    "        this.onTreeParentNodeChecked(node.parentNode,checked);\r",
                    "    }\r",
                    "}"
                ]
            },
            "designerId": "08613068-637f-411c-aafd-9ca6217d3205"
        },
        {
            "type": "staticfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onAjaxException",
                "designer|params": [
                    "response"
                ],
                "implHandler": [
                    "if(response.status == 200)\r",
                    "{\r",
                    "    var result = Ext.JSON.decode(response.responseText);\r",
                    "    Ext.Msg.alert('信息提示'+response.status, result.data);\r",
                    "}\r",
                    "else\r",
                    "{\r",
                    "    Ext.Msg.alert('信息提示', response.responseText);\r",
                    "}"
                ]
            },
            "designerId": "7b5ba420-4043-43c6-89b4-9e436578ddc8"
        },
        {
            "type": "staticfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "ajax",
                "designer|params": [
                    "config"
                ],
                "implHandler": [
                    "if(config.component)\r",
                    "{\r",
                    "    if(config.message)\r",
                    "    {\r",
                    "        config.component.setLoading(config.message);\r",
                    "    }\r",
                    "    else\r",
                    "    {\r",
                    "        config.component.setLoading('正在下载...');\r",
                    "    }\r",
                    "}\r",
                    "Ext.Ajax.request(\r",
                    "{\r",
                    "    url : config.url,\r",
                    "    params : config.params,\r",
                    "    method : 'post',\r",
                    "\r",
                    "    callback : function(options, success, response)\r",
                    "    {\r",
                    "        if (success)\r",
                    "        {\r",
                    "            config.callback(Ext.JSON.decode(response.responseText),options, success, response);// 调用回调函数\r",
                    "        }\r",
                    "        else\r",
                    "        {\r",
                    "            Ext.Msg.alert('信息提示', response.responseText);\r",
                    "        }\r",
                    "        if(config.component)\r",
                    "        {\r",
                    "            config.component.setLoading(false);\r",
                    "        }\r",
                    "    }\r",
                    "});"
                ]
            },
            "designerId": "394bcca9-3ba2-4b53-a498-8be915f9a068"
        },
        {
            "type": "staticfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "createTreeStore",
                "designer|params": [
                    "URL",
                    "pid"
                ],
                "implHandler": [
                    "var store = Ext.create(\"Ext.data.TreeStore\",\r",
                    "    {\r",
                    "        defaultRootId : pid,\r",
                    "        clearOnLoad : true,\r",
                    "        nodeParam : 'id',\r",
                    "        fields: [\r",
                    "        {\r",
                    "            name: 'id'\r",
                    "        },\r",
                    "        {\r",
                    "            name: 'sort',\r",
                    "            type: 'int'\r",
                    "        },\r",
                    "        {\r",
                    "            name: 'text'\r",
                    "        },\r",
                    "        {\r",
                    "            name: 'iconCls'\r",
                    "        },\r",
                    "        {\r",
                    "            name: 'leaf',\r",
                    "            type: 'boolean'\r",
                    "        },\r",
                    "        {\r",
                    "            name: 'type'\r",
                    "        },\r",
                    "        {\r",
                    "            name: 'resource'\r",
                    "        },\r",
                    "        {\r",
                    "            name: 'component'\r",
                    "        },\r",
                    "        {\r",
                    "            name: 'parentId'\r",
                    "        }\r",
                    "        ],\r",
                    "        proxy :\r",
                    "        {\r",
                    "            type : 'ajax',\r",
                    "            url : URL            \r",
                    "        }\r",
                    "    });\r",
                    "return store;"
                ]
            },
            "designerId": "a37d4a7f-ca93-4474-a706-4635e5a4128e"
        }
    ]
}