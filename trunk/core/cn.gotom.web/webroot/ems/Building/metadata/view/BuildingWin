{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "height": 349,
        "width": 590,
        "designer|userClassName": "BuildingWin",
        "designer|userAlias": "BuildingWin",
        "layout": "border",
        "title": "编辑建筑信息"
    },
    "designerId": "cce1931a-3626-4f5e-8694-7273dc9722d6",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|region": "center",
                "designer|snapToGrid": 10,
                "id": "BuildingEditForm",
                "layout": "absolute",
                "bodyPadding": 10,
                "header": false,
                "title": "My Form"
            },
            "designerId": "d36b5424-6738-4c7a-9f8c-042128ac3cf8",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "id": "code",
                        "fieldLabel": "编码",
                        "labelAlign": "right",
                        "labelWidth": 50,
                        "name": "code",
                        "invalidText": "编码不能为空",
                        "blankText": "编码不能为空"
                    },
                    "designerId": "ea50c30d-fb2b-4b46-91f9-9cb79c258466"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 220,
                        "layout|y": 10,
                        "id": "name",
                        "fieldLabel": "名称",
                        "labelAlign": "right",
                        "labelWidth": 50,
                        "name": "name",
                        "invalidText": "名称不能为空",
                        "size": 100
                    },
                    "designerId": "cb1d673f-ca48-4cb2-b8ea-684f77c74b77"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": -18,
                        "layout|y": 40,
                        "id": "buildYear",
                        "fieldLabel": "建设年代",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "buildYear",
                        "inputType": "number"
                    },
                    "designerId": "e138a097-d52c-42e4-9842-f2dfb81feee9"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 230,
                        "layout|y": 40,
                        "id": "buildFloor",
                        "fieldLabel": "建筑层数（层）",
                        "labelAlign": "right",
                        "name": "buildFloor",
                        "inputType": "number"
                    },
                    "designerId": "853db103-8897-416e-8b96-1a308f32a7aa"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": -6,
                        "layout|y": 70,
                        "id": "buildArea",
                        "fieldLabel": "建筑总面积（平方米）",
                        "labelAlign": "right",
                        "labelWidth": 140,
                        "name": "buildArea",
                        "inputType": "number"
                    },
                    "designerId": "0422bd1e-51ee-4953-9913-c87267c2977d"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 280,
                        "layout|y": 100,
                        "id": "airconditioner",
                        "fieldLabel": "空调总面积（平方米）",
                        "labelAlign": "right",
                        "labelWidth": 140,
                        "name": "airconditioner",
                        "inputType": "number"
                    },
                    "designerId": "68f8e34c-0d10-4d7e-ad66-0089105523ad"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": -6,
                        "layout|y": 100,
                        "id": "heatingArea",
                        "fieldLabel": "采暖总面积（平方米）",
                        "labelAlign": "right",
                        "labelWidth": 140,
                        "name": "heatingArea",
                        "inputType": "number"
                    },
                    "designerId": "a32a9108-1296-4ca1-a9cc-e2841de575d8"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 10,
                        "layout|y": 130,
                        "id": "airconditionerSystemCode",
                        "fieldLabel": "建筑空调系统",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "airconditionerSystemCode",
                        "displayField": "optionValue",
                        "valueField": "optionCode"
                    },
                    "designerId": "8523c312-fe7a-4bbe-b667-47b9c9cb8eeb"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 290,
                        "layout|y": 130,
                        "id": "heatingFormCode",
                        "fieldLabel": "建筑采暖形式",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "heatingFormCode",
                        "displayField": "optionValue",
                        "valueField": "optionCode"
                    },
                    "designerId": "e86ed99c-ed81-4eff-9465-9c89ae08a5a7"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 10,
                        "layout|y": 160,
                        "id": "structureCode",
                        "fieldLabel": "建筑结构形式",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "structureCode",
                        "displayField": "optionValue",
                        "valueField": "optionCode"
                    },
                    "designerId": "1ce2fa3e-b4c0-40e6-ba12-c7afa8b3cade"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 340,
                        "layout|y": 70,
                        "id": "shapeCoefficient",
                        "fieldLabel": "建筑体型系数",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "shapeCoefficient"
                    },
                    "designerId": "7ac0c146-517d-4d79-a69e-489b88a9dad3"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 290,
                        "layout|y": 160,
                        "id": "exteriorCode",
                        "fieldLabel": "建筑外墙形式",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "exteriorCode",
                        "displayField": "optionValue",
                        "valueField": "optionCode"
                    },
                    "designerId": "7035c5a9-0ab3-4353-8304-1b28529229fd"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 10,
                        "layout|y": 190,
                        "id": "exteriorWallCode",
                        "fieldLabel": "外墙保温形式",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "exteriorWallCode",
                        "displayField": "optionValue",
                        "valueField": "optionCode"
                    },
                    "designerId": "0cc68b2b-a585-470f-ba0e-2b64303a1b31"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 290,
                        "layout|y": 190,
                        "id": "windowTypeCode",
                        "fieldLabel": "建筑外窗类型",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "windowTypeCode",
                        "displayField": "optionValue",
                        "valueField": "optionCode"
                    },
                    "designerId": "4ce1dad4-1b9e-45ab-a9cb-cfa8b0de4c3a"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 10,
                        "layout|y": 220,
                        "id": "glassTypesCode",
                        "fieldLabel": "建筑玻璃类型",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "glassTypesCode",
                        "displayField": "optionValue",
                        "valueField": "optionCode"
                    },
                    "designerId": "e232daaf-d1fd-46cc-a2dc-00dd45ad6e37"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 290,
                        "layout|y": 220,
                        "id": "windowFrameMaterialCode",
                        "fieldLabel": "窗框材料类型",
                        "labelAlign": "right",
                        "labelWidth": 80,
                        "name": "windowFrameMaterialCode",
                        "displayField": "optionValue",
                        "valueField": "optionCode"
                    },
                    "designerId": "3991bb45-9695-4544-af9c-94fdd448fd3c"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": -9,
                        "layout|y": 250,
                        "id": "address",
                        "fieldLabel": "地址",
                        "labelAlign": "right",
                        "labelWidth": 60,
                        "name": "address"
                    },
                    "designerId": "3ffb35e9-a13a-416b-ab4a-3daaeba8f2f4"
                },
                {
                    "type": "Ext.form.field.Hidden",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 428,
                        "layout|y": 16,
                        "id": "id",
                        "fieldLabel": "Label",
                        "name": "id"
                    },
                    "designerId": "0e6ee34a-baeb-4187-a7f0-02ce3c08b51e"
                },
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 180,
                        "layout|y": 352,
                        "dock": "bottom",
                        "container|pack": "end"
                    },
                    "designerId": "7b8efaee-bbcd-48a1-961a-7780e8507f8d",
                    "cn": [
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "id": "btnBuildingSave",
                                "iconCls": "icon-save",
                                "params": [
                                    "bid"
                                ],
                                "text": "保存"
                            },
                            "designerId": "ced31369-a615-48ee-8247-f9fea4ff522e",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onBtnBuildingSaveClick",
                                        "implHandler": [
                                            "\r",
                                            "if (this.getForm().isValid())\r",
                                            "{\r",
                                            "    var id=Ext.getCmp('params').getValue();\r",
                                            "    //alert('Save id:'+id);\r",
                                            "    this.getForm().submit(\r",
                                            "    {\r",
                                            "        url : '../build!save.do',\r",
                                            "        method : 'POST',\r",
                                            "        params:\r",
                                            "        {\r",
                                            "            tid:id\r",
                                            "        },\r",
                                            "        waitMsg : '正在保存数据，稍后...',\r",
                                            "        success : function(f, action)\r",
                                            "        {\r",
                                            "            Ext.Msg.alert('信息提示', '保存成功');\r",
                                            "            //me.close();\r",
                                            "            var winform = Ext.create('ems.view.BuildingGrid'); \r",
                                            "\t\t\twinform.refreshBuildings(id);\r",
                                            "            this.close();\r",
                                            "        },\r",
                                            "        failure : function(f, action)\r",
                                            "        {\r",
                                            "            Ext.Msg.alert('信息提示', '保存失败，服务器端程序出错！');\r",
                                            "        }\r",
                                            "    });\r",
                                            "}"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "designerId": "3201e792-2beb-484f-b202-ccf1af16f489"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "id": "btnBuildingCancel",
                                "iconCls": "icon-cancel",
                                "text": "取消"
                            },
                            "designerId": "7e44d2a7-67bb-4ae4-92fc-2d059cbbc25a",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onBtnBuildingCancelClick",
                                        "implHandler": [
                                            "this.close();"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "designerId": "956c1e3c-0f2e-4137-a40f-db5248046729"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "basicfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "bindData",
                        "designer|params": [
                            "id",
                            "bid"
                        ],
                        "implHandler": [
                            "//alert('bindData-id:'+id); \r",
                            "var formPanel = this;\r",
                            "var wait = Ext.Msg.wait(\"正在载入......\", \"操作提示\"); \r",
                            "Ext.Ajax.request(\r",
                            "{\r",
                            "    url : '../build.do',\r",
                            "    method : 'POST',\r",
                            "    params:{  \r",
                            "        id:id,\r",
                            "        bid:bid\r",
                            "    },  \r",
                            "    success : function(response, options)\r",
                            "    {\r",
                            "        var result = Ext.JSON.decode(response.responseText);\r",
                            "        var record = Ext.create('ems.model.BuildingModel');\r",
                            "        //result.parentId = parentId;\r",
                            "        record.data = result;\r",
                            "        wait.close();\r",
                            "        formPanel.getForm().reset();\r",
                            "        formPanel.loadRecord(record);   \r",
                            "    },\r",
                            "    failure : function(response, options)\r",
                            "    {\r",
                            "        wait.close();\r",
                            "        Ext.Msg.alert(\"操作提示\", \"载入失败\");\r",
                            "    }\r",
                            "});"
                        ]
                    },
                    "designerId": "5ae408b1-b476-424e-a783-488c96eec7de"
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getForm",
                "implHandler": [
                    "return Ext.getCmp('BuildingEditForm');"
                ]
            },
            "designerId": "f3dadd3d-4ccc-4e26-914e-6991b2c2b2fa"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onWindowAfterLayout",
                "implHandler": [
                    "var airSystemCodeStore = new Ext.data.Store({\r",
                    "    autoLoad: true,\r",
                    "    storeId: 'airSystemCodeCmbStore',\r",
                    "    fields: [\r",
                    "    {\r",
                    "        name: 'optionCode',\r",
                    "        type: 'string'\r",
                    "    },\r",
                    "    {\r",
                    "        name: 'optionValue',\r",
                    "        type: 'string'\r",
                    "    }\r",
                    "    ],\r",
                    "    proxy: {\r",
                    "        type: 'ajax',  \r",
                    "        url : '../build!airSystemCodes.do',\r",
                    "        listeners: {\r",
                    "            exception: function(proxy, response, operation, eOpts) {\r",
                    "                alert(response.statusText);\r",
                    "            }\r",
                    "        }\r",
                    "    }\r",
                    "});\r",
                    "Ext.getCmp('airconditionerSystemCode').bindStore(airSystemCodeStore);\r",
                    "\r",
                    "var heatingFormCodeStroe = new Ext.data.Store({\r",
                    "    autoLoad: true,\r",
                    "    storeId: 'heatingFormCodeCmbStroe',\r",
                    "    fields: [\r",
                    "    {\r",
                    "        name: 'optionCode',\r",
                    "        type: 'string'\r",
                    "    },\r",
                    "    {\r",
                    "        name: 'optionValue',\r",
                    "        type: 'string'\r",
                    "    }\r",
                    "    ],\r",
                    "    proxy: {\r",
                    "        type: 'ajax',  \r",
                    "        url : '../build!heatingFormCodes.do',\r",
                    "        listeners: {\r",
                    "            exception: function(proxy, response, operation, eOpts) {\r",
                    "                alert(response.statusText);\r",
                    "            }\r",
                    "        }\r",
                    "    }\r",
                    "});\r",
                    "Ext.getCmp('heatingFormCode').bindStore(heatingFormCodeStroe);\r",
                    "\r",
                    "var structureCodeStroe = new Ext.data.Store({\r",
                    "    autoLoad: true,\r",
                    "    storeId: 'structureCodeCmbStroe',\r",
                    "    fields: [\r",
                    "    {\r",
                    "        name: 'optionCode',\r",
                    "        type: 'string'\r",
                    "    },\r",
                    "    {\r",
                    "        name: 'optionValue',\r",
                    "        type: 'string'\r",
                    "    }\r",
                    "    ],\r",
                    "    proxy: {\r",
                    "        type: 'ajax',  \r",
                    "        url : '../build!structureCodes.do',\r",
                    "        listeners: {\r",
                    "            exception: function(proxy, response, operation, eOpts) {\r",
                    "                alert(response.statusText);\r",
                    "            }\r",
                    "        }\r",
                    "    }\r",
                    "});\r",
                    "Ext.getCmp('structureCode').bindStore(structureCodeStroe);\r",
                    "\r",
                    "var exteriorCodeStroe = new Ext.data.Store({\r",
                    "    autoLoad: true,\r",
                    "    storeId: 'exteriorCodeCmbStroe',\r",
                    "    fields: [\r",
                    "    {\r",
                    "        name: 'optionCode',\r",
                    "        type: 'string'\r",
                    "    },\r",
                    "    {\r",
                    "        name: 'optionValue',\r",
                    "        type: 'string'\r",
                    "    }\r",
                    "    ],\r",
                    "    proxy: {\r",
                    "        type: 'ajax',  \r",
                    "        url : '../build!exteriorCodes.do',\r",
                    "        listeners: {\r",
                    "            exception: function(proxy, response, operation, eOpts) {\r",
                    "                alert(response.statusText);\r",
                    "            }\r",
                    "        }\r",
                    "    }\r",
                    "});\r",
                    "Ext.getCmp('exteriorCode').bindStore(exteriorCodeStroe);\r",
                    "\r",
                    "var exteriorWallCodeStroe = new Ext.data.Store({\r",
                    "    autoLoad: true,\r",
                    "    storeId: 'exteriorWallCodeCmbStroe',\r",
                    "    fields: [\r",
                    "    {\r",
                    "        name: 'optionCode',\r",
                    "        type: 'string'\r",
                    "    },\r",
                    "    {\r",
                    "        name: 'optionValue',\r",
                    "        type: 'string'\r",
                    "    }\r",
                    "    ],\r",
                    "    proxy: {\r",
                    "        type: 'ajax',  \r",
                    "        url : '../build!exteriorWallCodes.do',\r",
                    "        listeners: {\r",
                    "            exception: function(proxy, response, operation, eOpts) {\r",
                    "                alert(response.statusText);\r",
                    "            }\r",
                    "        }\r",
                    "    }\r",
                    "});\r",
                    "Ext.getCmp('exteriorWallCode').bindStore(exteriorWallCodeStroe);\r",
                    "\r",
                    "var windowTypeCodeStroe = new Ext.data.Store({\r",
                    "    autoLoad: true,\r",
                    "    storeId: 'windowTypeCodeCmbStroe',\r",
                    "    fields: [\r",
                    "    {\r",
                    "        name: 'optionCode',\r",
                    "        type: 'string'\r",
                    "    },\r",
                    "    {\r",
                    "        name: 'optionValue',\r",
                    "        type: 'string'\r",
                    "    }\r",
                    "    ],\r",
                    "    proxy: {\r",
                    "        type: 'ajax',  \r",
                    "        url : '../build!windowTypeCodes.do',\r",
                    "        listeners: {\r",
                    "            exception: function(proxy, response, operation, eOpts) {\r",
                    "                alert(response.statusText);\r",
                    "            }\r",
                    "        }\r",
                    "    }\r",
                    "});\r",
                    "Ext.getCmp('windowTypeCode').bindStore(windowTypeCodeStroe);\r",
                    "\r",
                    "var glassTypesCodeStroe = new Ext.data.Store({\r",
                    "    autoLoad: true,\r",
                    "    storeId: 'glassTypesCodeCmbStroe',\r",
                    "    fields: [\r",
                    "    {\r",
                    "        name: 'optionCode',\r",
                    "        type: 'string'\r",
                    "    },\r",
                    "    {\r",
                    "        name: 'optionValue',\r",
                    "        type: 'string'\r",
                    "    }\r",
                    "    ],\r",
                    "    proxy: {\r",
                    "        type: 'ajax',  \r",
                    "        url : '../build!glassTypesCodes.do',\r",
                    "        listeners: {\r",
                    "            exception: function(proxy, response, operation, eOpts) {\r",
                    "                alert(response.statusText);\r",
                    "            }\r",
                    "        }\r",
                    "    }\r",
                    "});\r",
                    "Ext.getCmp('glassTypesCode').bindStore(glassTypesCodeStroe);\r",
                    "\r",
                    "var windowFrameMaterialCodeStroe = new Ext.data.Store({\r",
                    "    autoLoad: true,\r",
                    "    storeId: 'windowFrameMaterialCodeCmbStroe',\r",
                    "    fields: [\r",
                    "    {\r",
                    "        name: 'optionCode',\r",
                    "        type: 'string'\r",
                    "    },\r",
                    "    {\r",
                    "        name: 'optionValue',\r",
                    "        type: 'string'\r",
                    "    }\r",
                    "    ],\r",
                    "    proxy: {\r",
                    "        type: 'ajax',  \r",
                    "        url : '../build!windowFrameMaterialCodes.do',\r",
                    "        listeners: {\r",
                    "            exception: function(proxy, response, operation, eOpts) {\r",
                    "                alert(response.statusText);\r",
                    "            }\r",
                    "        }\r",
                    "    }\r",
                    "});\r",
                    "Ext.getCmp('windowFrameMaterialCode').bindStore(windowFrameMaterialCodeStroe);"
                ],
                "name": "afterlayout",
                "scope": "me"
            },
            "designerId": "e56c2fa7-511d-41bb-8e06-0842eaab7b0c"
        }
    ]
}