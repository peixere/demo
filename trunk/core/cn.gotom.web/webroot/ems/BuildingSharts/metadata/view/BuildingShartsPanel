{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "id": "BuildingShartsPanel",
        "designer|userClassName": "BuildingShartsPanel",
        "designer|userAlias": "BuildingShartsPanel",
        "layout": "border",
        "title": null
    },
    "designerId": "bcffa829-619f-4e3e-8cae-6eb69c607a5e",
    "cn": [
        {
            "type": "Ext.tree.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|region": "west",
                "layout|split": true,
                "id": "BuildingShartsTreePanel",
                "maxWidth": 400,
                "minWidth": 100,
                "width": 150,
                "designer|createAlias": "",
                "collapsed": false,
                "collapsible": true,
                "title": "建筑能耗报表",
                "store": "BuildingShartsTreeStore",
                "rootVisible": false
            },
            "designerId": "badc1417-4791-427d-9680-ced1b69cf6bd",
            "cn": [
                {
                    "type": "Ext.tree.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "designerId": "071f1b78-e6e2-4cf7-bbb8-f851e951ccff"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onBuildingShartsTreePanelItemClick",
                        "implHandler": [
                            "\r",
                            "Ext.getCmp('name').setValue(record.data.text);\r",
                            "Ext.getCmp('id').setValue(record.data.id);"
                        ],
                        "name": "itemclick",
                        "scope": "me"
                    },
                    "designerId": "53b267d8-afa4-4d3b-b7ef-17849b064f4c"
                },
                {
                    "type": "Ext.panel.Tool",
                    "reference": {
                        "name": "tools",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "type": "refresh"
                    },
                    "designerId": "b3f2bbf9-f2ba-485d-9cbf-2ce894717b97",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onToolClick",
                                "implHandler": [
                                    "Ext.getCmp('BuildingShartsTreePanel').getStore().reload();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "101ec687-0395-4a02-84c6-48214cd3ff4b"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|region": "center",
                "id": "CenterPanel",
                "layout": "border",
                "title": null
            },
            "designerId": "cf165709-b3ee-4dc7-ba4a-18f6210c6eb2",
            "cn": [
                {
                    "type": "Ext.form.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|region": "north",
                        "designer|snapToGrid": 10,
                        "height": 101,
                        "id": "FormPanel",
                        "layout": "absolute",
                        "bodyPadding": 10,
                        "collapsed": false,
                        "collapsible": true,
                        "header": false,
                        "title": "查询条件",
                        "titleCollapse": false
                    },
                    "designerId": "49d0d5f9-a2b6-49f6-b68a-6a86d823ee60",
                    "cn": [
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dock": "top",
                                "id": "toolbar"
                            },
                            "designerId": "d498bc09-ce48-473d-aebf-33348b1bb928",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "id": "btnRed",
                                        "iconCls": "icon-refresh",
                                        "text": "刷新"
                                    },
                                    "designerId": "5215666d-2344-42ed-8d40-e94b6c20a3aa",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnRedClick",
                                                "implHandler": [
                                                    "window.location.reload();"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "designerId": "edd13c11-6fa7-4273-8b30-000eed873896"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "border": null,
                                        "id": "btnSearch",
                                        "iconCls": "icon-search",
                                        "text": "查询"
                                    },
                                    "designerId": "31c268d3-e3c8-47c8-8825-cf1b781619b6",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnSearchClick",
                                                "implHandler": [
                                                    "var me = this;\r",
                                                    "var heightchartcontainer = $('#heightchartcontainer');\r",
                                                    "var id = Ext.getCmp('id').getValue();\r",
                                                    "var name = Ext.getCmp('name').getValue();\r",
                                                    "var startDate = Ext.getCmp('startDate').getValue();\r",
                                                    "var endDate = Ext.getCmp('endDate').getValue();\r",
                                                    "var formdata = 'id='+id+'&name='+name+'&startDate='+startDate+'&endDate='+endDate;\r",
                                                    "var html = '<iframe width=\"100%\" height=\"100%\" frameborder=\"0\" src=\"chart.html?'+formdata+'\"></iframe>';\r",
                                                    "html = '<div id=\"heightchartcontainer\" width=\"100%\" height=\"100\"></div>';\r",
                                                    "Ext.getCmp('ContentPanel').update(html);\r",
                                                    "var form = Ext.getCmp('FormPanel');\r",
                                                    "if (form.isValid())\r",
                                                    "{\r",
                                                    "    form.submit({\r",
                                                    "        url : '/ems/buildingSharts.do',\r",
                                                    "        method : 'POST',\r",
                                                    "        waitMsg : '正在生成报表，稍后...',\r",
                                                    "        success : function(f, action)\r",
                                                    "        {\r",
                                                    "            var result = Ext.JSON.decode(action.response.responseText);\r",
                                                    "            me.showHighcharts(result.chart);\r",
                                                    "        },\r",
                                                    "        failure : function(f, action)\r",
                                                    "        {\r",
                                                    "            Ext.Msg.alert('信息提示', '服务器端程序出错！');\r",
                                                    "        }\r",
                                                    "    });\r",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "designerId": "cae5e0f2-d340-40d8-96d4-538c64b89bf3"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|anchor": null,
                                "layout|x": 10,
                                "layout|y": 10,
                                "id": "name",
                                "width": 380,
                                "fieldLabel": "建筑标识",
                                "labelAlign": "right",
                                "labelWidth": 80,
                                "name": "id"
                            },
                            "designerId": "231dd8b0-07f6-4720-8a39-36c29e574f4a"
                        },
                        {
                            "type": "Ext.form.field.Date",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|anchor": null,
                                "layout|x": 10,
                                "layout|y": 40,
                                "id": "startDate",
                                "width": 220,
                                "fieldLabel": "查询时间",
                                "labelAlign": "right",
                                "labelWidth": 80
                            },
                            "designerId": "4d74e755-54af-4704-90c4-e61f52664dcc"
                        },
                        {
                            "type": "Ext.form.field.Date",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|x": 230,
                                "layout|y": 40,
                                "id": "endDate",
                                "width": 160,
                                "fieldLabel": "至",
                                "labelAlign": "right",
                                "labelSeparator": " ",
                                "labelWidth": 20
                            },
                            "designerId": "09d66b1f-e789-44cd-87a7-1b449e1bc912"
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onFormPanelAfterLayout",
                                "implHandler": [
                                    "Ext.getCmp('startDate').setValue(new Date());\r",
                                    "Ext.getCmp('endDate').setValue(new Date());"
                                ],
                                "name": "afterlayout",
                                "scope": "me"
                            },
                            "designerId": "800a7a55-967d-474c-b1b2-6dd98fa9751b"
                        },
                        {
                            "type": "Ext.form.field.Hidden",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|x": 417,
                                "layout|y": 13,
                                "id": "id",
                                "fieldLabel": "Label"
                            },
                            "designerId": "57e7bd34-f26c-4b0e-8237-e4e6f9cdc25b"
                        }
                    ]
                },
                {
                    "type": "Ext.panel.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|region": "center",
                        "html": [
                            "<div id=\"heightchartcontainer\" style=\"min-width: 310px; width: 100%;height: 100%; margin: 0 auto\"></div>"
                        ],
                        "id": "ContentPanel",
                        "title": null
                    },
                    "designerId": "998fc5d0-5fbc-4617-a91f-6ad18c890e3b"
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "showHighcharts",
                "designer|params": [
                    "chartdata"
                ],
                "implHandler": [
                    "    var options = {\r",
                    "        chart: {\r",
                    "            renderTo: 'heightchartcontainer',\r",
                    "            type: 'line'\r",
                    "        },\r",
                    "        title: {\r",
                    "            text: '测试报表'\r",
                    "        },\r",
                    "        subtitle: {\r",
                    "            text: 'Irregular time data in Highcharts JS'\r",
                    "        },\t\t\r",
                    "        xAxis: {\r",
                    "            type: 'data'\r",
                    "        },\r",
                    "        yAxis: {\r",
                    "            title: {\r",
                    "                text: 'Snow depth (m)'\r",
                    "            }\r",
                    "        },\t                    \r",
                    "        series: []\r",
                    "    };\t\t\t    \r",
                    "\toptions.title.text = chartdata.title;\r",
                    "\toptions.subtitle.text = chartdata.subtitle;\r",
                    "\tvar seriesList = chartdata.series;\r",
                    "    $.each(seriesList, function (i, serie) {\r",
                    "        options.series.push({\r",
                    "            data: [],\r",
                    "            name: serie.name\r",
                    "        });\r",
                    "        var plist = serie.data;\r",
                    "        $.each(plist, function (j, p){\r",
                    "            options.series[i].data.push([p.x,p.y]); \r",
                    "        })\t\r",
                    "    })\r",
                    "    var chart = new Highcharts.Chart(options);"
                ]
            },
            "designerId": "ed31db4a-0c5f-42eb-b4fa-61c446e69a11"
        }
    ]
}