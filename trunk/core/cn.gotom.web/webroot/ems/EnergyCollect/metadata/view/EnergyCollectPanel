{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "id": "EnergyCollectPanel",
        "designer|userClassName": "EnergyCollectPanel",
        "designer|userAlias": "EnergyCollectPanel",
        "requires": [
            "ems.model.EnergyConsumptionCollectModel"
        ],
        "layout": "border",
        "title": null
    },
    "designerId": "bcffa829-619f-4e3e-8cae-6eb69c607a5e",
    "cn": [
        {
            "type": "Ext.tree.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|region": "west",
                "layout|split": true,
                "id": "BuildingTreePanel",
                "maxWidth": 400,
                "minWidth": 100,
                "width": 150,
                "designer|createAlias": "",
                "collapsed": false,
                "collapsible": true,
                "title": "建筑能耗数据采集",
                "store": "BuildingTreeStore",
                "rootVisible": false
            },
            "designerId": "badc1417-4791-427d-9680-ced1b69cf6bd",
            "cn": [
                {
                    "type": "Ext.tree.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "designerId": "071f1b78-e6e2-4cf7-bbb8-f851e951ccff"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onBuildingTreePanelItemClick",
                        "implHandler": [
                            "Ext.getCmp('name').setValue(record.data.text);\r",
                            "Ext.getCmp('buildingId').setValue(record.data.id);"
                        ],
                        "name": "itemclick",
                        "scope": "me"
                    },
                    "designerId": "53b267d8-afa4-4d3b-b7ef-17849b064f4c"
                },
                {
                    "type": "Ext.panel.Tool",
                    "reference": {
                        "name": "tools",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "type": "refresh"
                    },
                    "designerId": "b3f2bbf9-f2ba-485d-9cbf-2ce894717b97",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onToolClick",
                                "implHandler": [
                                    ""
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "101ec687-0395-4a02-84c6-48214cd3ff4b"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|region": "center",
                "id": "CenterPanel",
                "layout": "border",
                "title": null
            },
            "designerId": "cf165709-b3ee-4dc7-ba4a-18f6210c6eb2",
            "cn": [
                {
                    "type": "Ext.form.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|region": "north",
                        "designer|snapToGrid": 10,
                        "height": 101,
                        "id": "FormPanel",
                        "layout": "absolute",
                        "bodyPadding": 10,
                        "collapsed": false,
                        "collapsible": true,
                        "header": false,
                        "title": "查询条件",
                        "titleCollapse": false
                    },
                    "designerId": "49d0d5f9-a2b6-49f6-b68a-6a86d823ee60",
                    "cn": [
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dock": "top",
                                "id": "toolbar"
                            },
                            "designerId": "d498bc09-ce48-473d-aebf-33348b1bb928",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "id": "btnRed",
                                        "iconCls": "icon-refresh",
                                        "text": "刷新"
                                    },
                                    "designerId": "5215666d-2344-42ed-8d40-e94b6c20a3aa",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnRedClick",
                                                "implHandler": [
                                                    "window.location.reload();"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "designerId": "edd13c11-6fa7-4273-8b30-000eed873896"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "id": "btnNew",
                                        "iconCls": "icon-add",
                                        "text": "新增"
                                    },
                                    "designerId": "acf892b1-ee61-4ffb-bd54-43b7f3347cc2",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnNewClick",
                                                "implHandler": [
                                                    "this.showWinForm('');"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "designerId": "7d7ba7ae-b92b-4e6b-91ad-463321bade86"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "id": "btnDel",
                                        "iconCls": "icon-del",
                                        "text": "删除"
                                    },
                                    "designerId": "d1045bbb-510e-44fe-a8be-ed95942a566d",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnDelClick",
                                                "implHandler": [
                                                    "var me = this;\r",
                                                    "var selected = Ext.getCmp('GataGridPanel').getSelectionModel().selected;\r",
                                                    "var selecteditems = selected.items; \r",
                                                    "if (selecteditems.length == 0)\r",
                                                    "{\r",
                                                    "    Ext.Msg.show(\r",
                                                    "        {\r",
                                                    "            title : \"操作提示\",\r",
                                                    "            msg : \"请选择要删除的项!\",\r",
                                                    "            icon : Ext.Msg.WARNING\r",
                                                    "        });\r",
                                                    "    return;\r",
                                                    "}\r",
                                                    "var ids = [];\r",
                                                    "Ext.each(selecteditems, function()\r",
                                                    "         {\r",
                                                    "             var nd = this;\r",
                                                    "             ids.push(nd.data.id);\r",
                                                    "         });\r",
                                                    "        Ext.Msg.confirm(\"警告\", \"确定要删除吗？\", function(button)\r",
                                                    "        {\r",
                                                    "            if (button == \"yes\")\r",
                                                    "            {\r",
                                                    "                var wait = Ext.Msg.wait(\"正在删除......\", \"操作提示\");\r",
                                                    "                Ext.Ajax.request(\r",
                                                    "                    {\r",
                                                    "                        url : '../EnergyCollect!remove.do',\r",
                                                    "                        method : 'POST',\r",
                                                    "                        params:{  \r",
                                                    "                            id:ids,\r",
                                                    "                        },  \r",
                                                    "                        success : function(response, options)\r",
                                                    "                        {\r",
                                                    "                            wait.close();\r",
                                                    "                            var result = Ext.JSON.decode(response.responseText); \r",
                                                    "                            Ext.Msg.alert('信息提示', result.data);\r",
                                                    "                        },\r",
                                                    "                        failure : function(response, options)\r",
                                                    "                        {\r",
                                                    "                            wait.close();\r",
                                                    "                            if(response.status == 200)\r",
                                                    "                            {\r",
                                                    "                                var result = Ext.JSON.decode(response.responseText);\r",
                                                    "                                Ext.Msg.alert('信息提示', result.data);\r",
                                                    "                            }\r",
                                                    "                            else\r",
                                                    "                            {\r",
                                                    "                                Ext.Msg.alert('信息提示', response.responseText);\r",
                                                    "                            }\r",
                                                    "                        }\r",
                                                    "                    });\r",
                                                    "                this.onBtnSearchClick(button,e,eOpts);\r",
                                                    "            }\r",
                                                    "        });"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "designerId": "336850b0-b65e-4c1a-ae3c-dcf09080eadd"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "border": null,
                                        "id": "btnSearch",
                                        "iconCls": "icon-search",
                                        "text": "查询"
                                    },
                                    "designerId": "31c268d3-e3c8-47c8-8825-cf1b781619b6",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnSearchClick",
                                                "implHandler": [
                                                    "var me = this;\r",
                                                    "var form = Ext.getCmp('FormPanel');\r",
                                                    "if (form.isValid())\r",
                                                    "{\r",
                                                    "    form.submit({\r",
                                                    "        url : '../EnergyCollect!list.do',\r",
                                                    "        method : 'POST',\r",
                                                    "        waitMsg : '正在生成报表，稍后...',\r",
                                                    "        success : function(f, action)\r",
                                                    "        {\r",
                                                    "            var result = Ext.JSON.decode(action.response.responseText);\r",
                                                    "            me.loadGridData(result.data);\r",
                                                    "            //me.showHighcharts(result.data);\r",
                                                    "        },\r",
                                                    "        failure : function(f, action)\r",
                                                    "        {\r",
                                                    "            if(action.response.status == 200)\r",
                                                    "            {\r",
                                                    "                var result = Ext.JSON.decode(action.response.responseText);\r",
                                                    "                Ext.Msg.alert('信息提示', result.data);\r",
                                                    "            }\r",
                                                    "            else\r",
                                                    "            {\r",
                                                    "                Ext.Msg.alert('信息提示', action.response.responseText);\r",
                                                    "            }\r",
                                                    "        }\r",
                                                    "    });\r",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "designerId": "cae5e0f2-d340-40d8-96d4-538c64b89bf3"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|anchor": null,
                                "layout|x": 10,
                                "layout|y": 10,
                                "id": "name",
                                "width": 380,
                                "fieldLabel": "建筑标识",
                                "labelAlign": "right",
                                "labelWidth": 80,
                                "name": "name"
                            },
                            "designerId": "231dd8b0-07f6-4720-8a39-36c29e574f4a"
                        },
                        {
                            "type": "Ext.form.field.Date",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|anchor": null,
                                "layout|x": 10,
                                "layout|y": 40,
                                "id": "startDate",
                                "width": 220,
                                "fieldLabel": "查询时间",
                                "labelAlign": "right",
                                "labelWidth": 80,
                                "name": "startDate"
                            },
                            "designerId": "4d74e755-54af-4704-90c4-e61f52664dcc"
                        },
                        {
                            "type": "Ext.form.field.Date",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|x": 230,
                                "layout|y": 40,
                                "id": "endDate",
                                "width": 160,
                                "fieldLabel": "至",
                                "labelAlign": "right",
                                "labelSeparator": " ",
                                "labelWidth": 20,
                                "name": "endDate"
                            },
                            "designerId": "09d66b1f-e789-44cd-87a7-1b449e1bc912"
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onFormPanelAfterLayout",
                                "implHandler": [
                                    "Ext.getCmp('startDate').setValue(new Date());\r",
                                    "Ext.getCmp('endDate').setValue(new Date());"
                                ],
                                "name": "afterlayout",
                                "scope": "me"
                            },
                            "designerId": "800a7a55-967d-474c-b1b2-6dd98fa9751b"
                        },
                        {
                            "type": "Ext.form.field.Hidden",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|x": 417,
                                "layout|y": 13,
                                "id": "buildingId",
                                "fieldLabel": "Label",
                                "name": "buildingId"
                            },
                            "designerId": "57e7bd34-f26c-4b0e-8237-e4e6f9cdc25b"
                        }
                    ]
                },
                {
                    "type": "Ext.panel.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|region": "center",
                        "html": null,
                        "id": "ContentPanel",
                        "layout": "border",
                        "title": null
                    },
                    "designerId": "998fc5d0-5fbc-4617-a91f-6ad18c890e3b",
                    "cn": [
                        {
                            "type": "Ext.grid.Panel",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|region": "center",
                                "id": "GataGridPanel",
                                "autoScroll": true,
                                "collapsible": true,
                                "title": "查询结果",
                                "store": "MyJsonStore"
                            },
                            "designerId": "30d4930b-5f5d-4022-baff-8717807c72f1",
                            "cn": [
                                {
                                    "type": "Ext.grid.column.Date",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "width": 160,
                                        "defaultWidth": 200,
                                        "dataIndex": "collectDate",
                                        "text": "采集时间",
                                        "format": "Y-m-d H:i:s"
                                    },
                                    "designerId": "6bd6cd2f-3ff9-4117-b54c-e55fe6155a76",
                                    "customConfigs": [
                                        {
                                            "group": "(Custom Properties)",
                                            "name": "renderer",
                                            "type": "string"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.grid.column.Column",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "sortable": false,
                                        "dataIndex": "electric",
                                        "text": "耗电量(度)"
                                    },
                                    "designerId": "eb8d7c8b-3a17-4e7e-ab82-2fbd00492dae"
                                },
                                {
                                    "type": "Ext.grid.column.Column",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "water",
                                        "text": "用水量(吨)"
                                    },
                                    "designerId": "f9509b0b-9b3f-4d6d-bc5c-cf51ae832fe5"
                                },
                                {
                                    "type": "Ext.grid.column.Column",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "gas",
                                        "text": "燃气(立方)"
                                    },
                                    "designerId": "f6aa7bd8-856e-4e2c-b9aa-95e99aeed288"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "heating",
                                        "text": "集中供热量"
                                    },
                                    "designerId": "fc12c46b-96e0-471c-904b-cb70b1c07dcf"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "cooling",
                                        "text": "集中供冷量"
                                    },
                                    "designerId": "a20f5a58-8f0e-4f3b-827d-b4f8cde9e279"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "otherEnergy",
                                        "text": "其它能源"
                                    },
                                    "designerId": "35fb8332-61ad-4c5f-a668-0f9d9caea2c7"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "coal",
                                        "text": "煤"
                                    },
                                    "designerId": "4164f0f0-d0a2-491d-bb85-4bc3df836abd"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "lpg",
                                        "text": "液化石油气"
                                    },
                                    "designerId": "07ce4b59-acf6-40f5-9f31-80aa8bce5721"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "manufacturedGas",
                                        "text": "人工煤气"
                                    },
                                    "designerId": "fe1490c5-22fe-4701-bdad-a125d197be76"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "gasoline",
                                        "text": "汽油"
                                    },
                                    "designerId": "5e7d74d3-ac3c-45e0-a316-80b580ab5813"
                                },
                                {
                                    "type": "Ext.grid.column.Number",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "kerosene",
                                        "text": "煤油"
                                    },
                                    "designerId": "db500b2b-012b-46a2-b072-f282c0a78cc8"
                                },
                                {
                                    "type": "Ext.grid.View",
                                    "reference": {
                                        "name": "viewConfig",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "designerId": "d1b3924a-f188-4375-9508-8a61cb0277ec",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onViewItemClick",
                                                "implHandler": [
                                                    ""
                                                ],
                                                "name": "itemclick",
                                                "scope": "me"
                                            },
                                            "designerId": "d4ed74cd-d889-4058-9cc7-632290c499dc"
                                        },
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onViewItemDblClick",
                                                "implHandler": [
                                                    "this.showWinForm(record);"
                                                ],
                                                "name": "itemdblclick",
                                                "scope": "me"
                                            },
                                            "designerId": "69932b90-bb87-4955-8d13-d34f0c5a1455"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.selection.CheckboxModel",
                                    "reference": {
                                        "name": "selModel",
                                        "type": "object"
                                    },
                                    "codeClass": "Ext.selection.CheckboxModel",
                                    "designerId": "75d42d8a-0372-4d2b-a1d9-ab19dcfa011b"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "loadGridData",
                "designer|params": [
                    "data"
                ],
                "implHandler": [
                    "/**\r",
                    "var json_data={'out':[\r",
                    "{\"context\":\"Lisa\", \"reductions\":\"lisa@simpsons.com\", \"phone\":\"555-111-1224\"},\r",
                    "{\"context\":\"Bart\", \"reductions\":\"bart@simpsons.com\", \"phone\":\"555--222-1234\"},\r",
                    "{\"context\":\"Homer\", \"reductions\":\"home@simpsons.com\", \"phone\":\"555-222-1244\"},\r",
                    "{\"context\":\"Marge\", \"reductions\":\"marge@simpsons.com\", \"phone\":\"555-222-1254\"}\r",
                    "]};\r",
                    "\r",
                    "var jsonStore = Ext.create('Ext.data.Store', {\r",
                    "storeId:'jsonStore',\r",
                    "fields: ['context', 'reductions','phone'],\r",
                    "data : json_data,        \r",
                    "proxy:\r",
                    "{\r",
                    "type: 'memory',\r",
                    "reader:{\r",
                    "type: 'json',\r",
                    "root: 'out'\r",
                    "}\r",
                    "}\r",
                    "});    \r",
                    "*/\r",
                    "\r",
                    "var jsonStore = Ext.create('Ext.data.Store', {\r",
                    "    storeId:'jsonStore',\r",
                    "    model: 'ems.model.EnergyConsumptionCollectModel',\r",
                    "    data : data,\r",
                    "    proxy:\r",
                    "    {\r",
                    "        type: 'memory',\r",
                    "        reader:{\r",
                    "            type: 'json',\r",
                    "        }\r",
                    "    }    \r",
                    "});\r",
                    "Ext.getCmp('GataGridPanel').bindStore(jsonStore);           "
                ]
            },
            "designerId": "b52acb1b-f364-413f-ab66-3a8605284441"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "showWinForm",
                "designer|params": [
                    "record"
                ],
                "implHandler": [
                    "var winform = Ext.create('ems.view.EnergyCollectWindow');\r",
                    "var buildingId = Ext.getCmp('buildingId').getValue();\r",
                    "var name = Ext.getCmp('name').getValue();\r",
                    "winform.show();\r",
                    "var id = '';\r",
                    "if(record !== '')\r",
                    "{\r",
                    "    id = record.data.id;\r",
                    "}\r",
                    "winform.bindFields(buildingId,name,id);\r",
                    ""
                ]
            },
            "designerId": "db5395ab-6bf6-48c1-98ff-1fdff2bd7567"
        }
    ]
}