{
    "type": "Ext.grid.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "height": 359,
        "id": "BuildFuncGrid",
        "width": 468,
        "designer|userClassName": "BuildFuncGrid",
        "designer|userAlias": "BuildFuncGrid",
        "frameHeader": false,
        "title": "建筑类别管理",
        "enableColumnHide": false,
        "enableColumnMove": false,
        "store": "BuildingFuncStore"
    },
    "designerId": "798b4213-2a66-4fef-babe-edff7cdc9e20",
    "cn": [
        {
            "type": "Ext.grid.View",
            "reference": {
                "name": "viewConfig",
                "type": "object"
            },
            "codeClass": null,
            "designerId": "4557cfc2-0cc5-4edc-bb2b-f01e97041a86"
        },
        {
            "type": "Ext.grid.column.Column",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|displayName": "code",
                "dataIndex": "code",
                "text": "编码"
            },
            "designerId": "48567c27-d68e-48eb-bc3d-a2f4bfebd260"
        },
        {
            "type": "Ext.grid.column.Column",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|displayName": "name",
                "dataIndex": "name",
                "text": "名称"
            },
            "designerId": "952d68d7-e207-47e5-9be5-7aafaeb4ed03"
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "top",
                "id": "bfToolBar"
            },
            "designerId": "b236a5b0-529d-4572-ada9-afee7c9c5c69",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "id": "btnRef",
                        "iconCls": "icon-refresh",
                        "text": "刷新"
                    },
                    "designerId": "3a4797d1-8431-43a4-8b4b-544ea0f4aa54",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnRefClick",
                                "implHandler": [
                                    "window.location.reload();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "29f7836d-5640-4eeb-85cd-5fe13bc833a8"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "id": "btnNew",
                        "iconCls": "icon-add",
                        "text": "新增"
                    },
                    "designerId": "b2afd872-ebf8-4201-807f-c76e8dd8d109",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnNewClick",
                                "implHandler": [
                                    "this.openWinForm('');"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "7d5232e2-f111-4ee9-9f5e-160c3092be70"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "id": "btnEdit",
                        "iconCls": "icon-edit",
                        "text": "修改"
                    },
                    "designerId": "684442ad-d236-4207-88f9-a032a629ee41",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnEditClick",
                                "implHandler": [
                                    "var selected = this.getSelectionModel().selected;\r",
                                    "var record = selected.items[0]; \r",
                                    "\r",
                                    "if(!Ext.isEmpty(record))\r",
                                    "{\r",
                                    "    this.openWinForm(record.data.id);\r",
                                    "}\r",
                                    "else\r",
                                    "{\r",
                                    "     Ext.Msg.show(\r",
                                    "    {\r",
                                    "        title : \"操作提示\",\r",
                                    "        msg : \"请选择要修改的项!\",\r",
                                    "        icon : Ext.Msg.WARNING\r",
                                    "    });\r",
                                    "    return;\r",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "1df4e7cc-cdac-496c-9fa5-29a906f8bc31"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "id": "btnDel",
                        "iconCls": "icon-del",
                        "text": "删除"
                    },
                    "designerId": "bdb5560c-465c-480a-9194-90b4f91c4f59",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnDelClick",
                                "implHandler": [
                                    "var selected = this.getSelectionModel().selected;\r",
                                    "var selecteditems = selected.items;\r",
                                    "\r",
                                    "if (selecteditems.length == 0)\r",
                                    "{\r",
                                    "    Ext.Msg.show(\r",
                                    "    {\r",
                                    "        title : \"操作提示\",\r",
                                    "        msg : \"请选择要删除的节点!\",\r",
                                    "        icon : Ext.Msg.WARNING\r",
                                    "    });\r",
                                    "    return;\r",
                                    "}\r",
                                    "var ids = [];\r",
                                    "Ext.each(selecteditems, function()\r",
                                    "{\r",
                                    "    var nd = this;\r",
                                    "    ids.push(nd.data.id);\r",
                                    "});\r",
                                    "Ext.Msg.confirm(\"警告\", \"确定要删除吗？\", function(button)\r",
                                    "{\r",
                                    "    if (button == \"yes\")\r",
                                    "    {\r",
                                    "        Ext.Msg.wait(\"正在执行......\", \"操作提示\");\r",
                                    "        Ext.Ajax.request(\r",
                                    "        {\r",
                                    "            url : '../buildfunc!remove.do',\r",
                                    "            method : 'POST',\r",
                                    "            params :\r",
                                    "            {\r",
                                    "                id : ids.join(\",\")\r",
                                    "            },\r",
                                    "            success : function(response, options)\r",
                                    "            {\r",
                                    "                Ext.Msg.alert(\"删除提示\", \"删除成功\");\r",
                                    "                window.location.reload();\r",
                                    "            },\r",
                                    "            failure : function(response, options)\r",
                                    "            {\r",
                                    "                Ext.Msg.alert(\"删除提示\", \"删除失败\");\r",
                                    "            }\r",
                                    "        });\r",
                                    "    }\r",
                                    "});"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "98343546-d923-4e52-9ade-ecd7d9690253"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "openWinForm",
                "designer|params": [
                    "id"
                ],
                "implHandler": [
                    "var winform = Ext.create('ems.view.BuildingFuncWin'); \r",
                    "winform.getForm().bindData(id); \r",
                    "winform.show();"
                ]
            },
            "designerId": "53769701-dd5f-41d6-8dc1-f04db6981d83"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onBuildFuncGridItemDblClick",
                "implHandler": [
                    "//alert(record.data.id);\r",
                    "this.openWinForm(record.data.id);"
                ],
                "name": "itemdblclick",
                "scope": "me"
            },
            "designerId": "9f870367-7b86-4b7d-84ce-38caee709e35"
        }
    ]
}